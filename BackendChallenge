<?php
// Initialize cURL to fetch data from the API
$ch = curl_init('https://coderbyte.com/api/challenges/json/age-counting');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HEADER, 0);
$data = curl_exec($ch);
curl_close($ch);

// Decode the JSON response
$response = json_decode($data, true);

// Extract the "data" key
$dataString = $response['data'];

// Split the string into individual records
$records = explode(',', $dataString);

// Initialize a counter
$count = 0;

// Loop through each record
foreach ($records as $record) {
    // Extract the age using a regex
    if (preg_match('/age=(\d+)/', $record, $matches)) {
        $age = (int)$matches[1];
        // Check if age is >= 50
        if ($age >= 50) {
            $count++;
        }
    }
}

// Output the final count
echo $count;
?>
